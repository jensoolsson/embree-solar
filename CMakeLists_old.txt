## Copyright 2009-2021 Intel Corporation
## SPDX-License-Identifier: Apache-2.0

CMAKE_MINIMUM_REQUIRED(VERSION 3.2.0)

PROJECT(solar)

SET(CMAKE_CXX_STANDARD 14)
FIND_PACKAGE(embree REQUIRED)

ADD_EXECUTABLE(embree_solar main.cpp embree_solar.cpp)
TARGET_LINK_LIBRARIES(embree_solar embree)

## Find pybind11
execute_process(COMMAND python -c "import site; print([s for s in site.getsitepackages() if 'site-packages' in s][0])" OUTPUT_VARIABLE PYTHON_SITE_PACKAGES OUTPUT_STRIP_TRAILING_WHITESPACE)
set(pybind11_DIR ${PYTHON_SITE_PACKAGES}/pybind11/share/cmake/pybind11)

message("Pybind11 DIR: " ${pybind11_DIR})
find_package(pybind11 REQUIRED) 

# Set include directories - Should that be needed
include_directories(${pybind11_INCLUDE_DIRS})

pybind11_add_module(_embree_solar main.cpp)
